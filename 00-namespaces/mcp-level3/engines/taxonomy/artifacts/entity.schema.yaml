# Entity Artifact Schema
# Defines the structure for entities in taxonomy classification

version: "1.0.0"
semantic_role: "entity"
artifact_type: "schema"
semantic_root: true

metadata:
  name: "entity"
  description: "Schema for entities extracted and classified by the taxonomy engine"
  author: "MCP Core Team"
  created: "2025-01-11"
  updated: "2025-01-11"
  tags:
    - "taxonomy"
    - "entity"
    - "classification"
    - "nlp"

schema:
  type: "object"
  required:
    - "entity_id"
    - "entity_type"
    - "label"
    - "metadata"
  properties:
    entity_id:
      type: "string"
      description: "Unique identifier for the entity"
      pattern: "^entity:[a-zA-Z0-9_-]+:[a-zA-Z0-9_-]+$"
      example: "entity:person:john_doe"
      
    entity_type:
      type: "string"
      description: "Type/class of the entity"
      example: "Person"
      
    label:
      type: "string"
      description: "Human-readable label"
      minLength: 1
      example: "John Doe"
      
    canonical_form:
      type: "string"
      description: "Canonical/normalized form"
      example: "john_doe"
      
    aliases:
      type: "array"
      description: "Alternative names/aliases"
      items:
        type: "string"
      example: ["J. Doe", "John D.", "Johnny"]
      
    properties:
      type: "object"
      description: "Entity properties"
      additionalProperties: true
      example:
        age: 30
        occupation: "Engineer"
        location: "San Francisco"
        
    classification:
      type: "object"
      description: "Classification information"
      properties:
        primary_category:
          type: "string"
          example: "Person"
        sub_categories:
          type: "array"
          items:
            type: "string"
          example: ["Professional", "Technical"]
        confidence:
          type: "number"
          minimum: 0
          maximum: 1
          example: 0.95
        ontology:
          type: "string"
          description: "Ontology reference"
          example: "schema.org"
          
    metadata:
      type: "object"
      required:
        - "source"
        - "extracted_at"
      properties:
        source:
          type: "string"
          description: "Source document/text"
          example: "doc:123"
        extracted_at:
          type: "string"
          format: "date-time"
          example: "2025-01-11T10:00:00Z"
        extraction_method:
          type: "string"
          enum: ["manual", "rule-based", "ml-model", "llm"]
          example: "llm"
        model_name:
          type: "string"
          example: "gpt-4"
        confidence:
          type: "number"
          minimum: 0
          maximum: 1
          example: 0.95

validation_rules:
  - rule: "entity_id_format"
    description: "Entity ID must follow naming convention"
    expression: "entity_id matches pattern 'entity:type:identifier'"
    
  - rule: "confidence_range"
    description: "Confidence must be between 0 and 1"
    expression: "metadata.confidence >= 0 && metadata.confidence <= 1"

examples:
  - name: "person_entity"
    description: "Entity representing a person"
    data:
      entity_id: "entity:person:john_doe"
      entity_type: "Person"
      label: "John Doe"
      canonical_form: "john_doe"
      aliases: ["J. Doe", "John D."]
      properties:
        age: 30
        occupation: "Engineer"
        location: "San Francisco"
      classification:
        primary_category: "Person"
        sub_categories: ["Professional", "Technical"]
        confidence: 0.95
        ontology: "schema.org"
      metadata:
        source: "doc:123"
        extracted_at: "2025-01-11T10:00:00Z"
        extraction_method: "llm"
        model_name: "gpt-4"
        confidence: 0.95

usage_guidelines:
  - "Use consistent entity type naming"
  - "Maintain canonical forms for deduplication"
  - "Track extraction confidence"
  - "Link to ontologies for semantic interoperability"