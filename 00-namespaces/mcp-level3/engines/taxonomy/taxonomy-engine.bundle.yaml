# MCP Level 3 - Taxonomy Engine Bundle

apiVersion: mcp.ninjatech.ai/v1alpha1
kind: EngineBundle
metadata:
  name: taxonomy-engine
  namespace: mcp-level3
  version: 1.0.0
  description: "Taxonomy Engine deployment bundle"
  labels:
    engine-type: taxonomy
    deployment-tier: core
    criticality: high

components:
  services:
    - name: taxonomy-api-service
      type: rest-api
      version: 1.0.0
      image: "ninjatech/taxonomy-api:1.0.0"
      port: 8080
      replicas: 3
      resources:
        requests:
          cpu: "500m"
          memory: "1Gi"
        limits:
          cpu: "2000m"
          memory: "4Gi"
    
    - name: entity-service
      type: service
      version: 1.0.0
      image: "ninjatech/entity-service:1.0.0"
      port: 8081
      replicas: 3
      resources:
        requests:
          cpu: "500m"
          memory: "1Gi"
        limits:
          cpu: "2000m"
          memory: "4Gi"
    
    - name: ontology-service
      type: service
      version: 1.0.0
      image: "ninjatech/ontology-service:1.0.0"
      port: 8082
      replicas: 2
      resources:
        requests:
          cpu: "1000m"
          memory: "2Gi"
        limits:
          cpu: "4000m"
          memory: "8Gi"
    
    - name: graph-service
      type: service
      version: 1.0.0
      image: "ninjatech/graph-service:1.0.0"
      port: 8083
      replicas: 3
      resources:
        requests:
          cpu: "1000m"
          memory: "2Gi"
        limits:
          cpu: "4000m"
          memory: "8Gi"
  
  datastores:
    - name: graph-database
      type: graph-db
      provider: "neo4j"
      version: "5.x"
      configuration:
        replicas: 3
      resources:
        storage: "500Gi"
        memory: "32Gi"
    
    - name: triple-store
      type: rdf-store
      provider: "blazegraph"
      version: "2.x"
      configuration:
        replicas: 3
      resources:
        storage: "200Gi"
        memory: "16Gi"
    
    - name: search-index
      type: search-engine
      provider: "elasticsearch"
      version: "8.x"
      configuration:
        replicas: 3
      resources:
        storage: "300Gi"
        memory: "16Gi"

deployment:
  strategy:
    type: "rolling"
  
  scaling:
    horizontal:
      enabled: true
      min_replicas: 3
      max_replicas: 15
  
  quotas:
    cpu: "50"
    memory: "100Gi"
    storage: "1Ti"

environments:
  production:
    replicas: 3
    resources:
      cpu: "50"
      memory: "100Gi"

secrets:
  - name: graph-db-credentials
    type: credentials
    provider: vault
    path: "secret/taxonomy/graph-db"

health_checks:
  liveness:
    http_get:
      path: "/health/live"
      port: 8080
    initial_delay: 30s
    period: 10s

observability:
  metrics:
    enabled: true
    provider: prometheus
  logging:
    enabled: true
    provider: elasticsearch
  tracing:
    enabled: true
    provider: jaeger

security:
  pod_security:
    run_as_non_root: true

backup:
  enabled: true
  schedule: "0 2 * * *"
  retention: 30d

documentation:
  deployment_guide: "https://docs.ninjatech.ai/mcp/taxonomy-engine/deployment"
